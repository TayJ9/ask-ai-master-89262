# Nixpacks configuration for Railway
# This ensures secrets are only accessed at runtime, not during build
# Note: npm comes bundled with nodejs_20, so we don't need to specify it separately

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
# Install all dependencies including dev dependencies (needed for tsx and TypeScript)
cmds = ["npm install --include=dev"]

[phases.build]
# No build step needed - TypeScript runs directly with tsx at runtime
cmds = []

[start]
# Start command is overridden by railway.json to include setup-db
cmd = "npm start"

