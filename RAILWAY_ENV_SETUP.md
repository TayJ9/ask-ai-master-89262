# Railway Environment Variables Setup

## Critical Issue Found

The Railway logs show:
```
‚ùå OPENAI_API_KEY not set!
```

This prevents the backend from connecting to OpenAI Realtime API to start the interview.

## Required Environment Variables

### 1. OPENAI_API_KEY (CRITICAL - MISSING)
- **Purpose**: Authenticate with OpenAI Realtime API
- **How to get**: 
  1. Go to https://platform.openai.com/api-keys
  2. Sign in or create an account
  3. Click "Create new secret key"
  4. Copy the key (starts with `sk-`)
- **How to add to Railway**:
  1. Go to your Railway project dashboard
  2. Click on your backend service
  3. Go to the "Variables" tab
  4. Click "New Variable"
  5. Name: `OPENAI_API_KEY`
  6. Value: `sk-...` (your OpenAI API key)
  7. Click "Add"

### 2. DATABASE_URL (Already Set)
- ‚úÖ Should be auto-generated by Railway PostgreSQL
- If missing, Railway will create it automatically when you add a PostgreSQL service

### 3. JWT_SECRET (Recommended)
- **Purpose**: Signing JWT tokens for authentication
- **How to generate**: Use any secure random string (32+ characters)
- **Example**: `openssl rand -base64 32`
- **How to add**: Same as OPENAI_API_KEY above

### 4. FRONTEND_URL (Optional but Recommended)
- **Purpose**: Explicitly allow CORS from your Vercel frontend
- **Value**: `https://ask-ai-master-89262-9ec8zd1zq-taylors-projects-53505c52.vercel.app`
- **Note**: The backend already allows all `*.vercel.app` domains, so this is optional

### 5. NODE_ENV (Optional)
- **Value**: `production`
- **Note**: Railway may set this automatically

### 6. PORT (Auto-set by Railway)
- Railway automatically sets this, no need to configure manually

## Quick Setup Steps

1. **Get OpenAI API Key**:
   - Visit https://platform.openai.com/api-keys
   - Create a new secret key
   - Copy it (you won't see it again!)

2. **Add to Railway**:
   ```
   Railway Dashboard ‚Üí Your Backend Service ‚Üí Variables Tab ‚Üí New Variable
   Name: OPENAI_API_KEY
   Value: sk-... (your key)
   ```

3. **Redeploy** (if needed):
   - Railway will automatically redeploy when you add variables
   - Or trigger a manual redeploy from the Deployments tab

4. **Verify**:
   - Check Railway logs after deployment
   - You should see: `üîë OpenAI API key found, creating connection...`
   - Instead of: `‚ùå OPENAI_API_KEY not set!`

## Testing After Setup

Once OPENAI_API_KEY is set, you should see in Railway logs:

```
üîë OpenAI API key found, creating connection...
üîå Attempting to connect to OpenAI...
‚úì Connected to OpenAI Realtime API
‚úì Session configuration sent to OpenAI
‚úì OpenAI session updated and ready
üé§ Triggering AI to start speaking...
‚úÖ interview_started message sent
```

## Cost Note

OpenAI Realtime API usage is billed per:
- Audio input (seconds)
- Audio output (seconds)
- Token usage

Check OpenAI pricing: https://openai.com/api/pricing/

For testing, costs are typically very low (cents per interview).

## Security Best Practices

1. ‚úÖ Never commit API keys to Git
2. ‚úÖ Use Railway's Variables feature (encrypted at rest)
3. ‚úÖ Rotate keys periodically
4. ‚úÖ Set usage limits in OpenAI dashboard
5. ‚úÖ Monitor usage in OpenAI dashboard

